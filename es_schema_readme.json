Объяснение схемы данных индекса movies

Это задание будет достаточно сложно выполнить, не имея никакого представления о схеме индекса в Elasticsearch.
Пройдёмся по основным элементам схемы данных:

"refresh_interval": "1s" — при сохранении данных обновляет индекс раз в секунду.
Блок "analysis" — в нём задаются все настройки для полнотекстового поиска: фильтры и анализаторы. 
Незаменимая вещь для задачи поиска по тексту.
В каждой схеме данных указано "dynamic": "strict" — это позволяет защититься от невалидных данных.
Поля actors и writers используют вложенную схему данных — это помогает валидировать вложенные json-объекты.
Также присутствуют поля actors_names и writers_names, которые упрощают запросы на поиск. 
Вам это понадобится в следующих модулях.
Поле title содержит внутри себя ещё одно поле — title.raw. 
Оно нужно, чтобы у Elasticsearch была возможность делать сортировку, так как он не умеет сортировать данные по типу text.

curl -XPUT http://127.0.0.1:9200/movies -H 'Content-Type: application/json' -d'
{
  "settings": {
    "refresh_interval": "1s", // Интервал обновления индекса (как часто новые данные становятся доступны для поиска)
    "analysis": {
      "filter": {
        "english_stop": {
          "type": "stop", // Фильтр стоп-слов (не учитываются при поиске)
          "stopwords": "_english_" // Встроенный список английских стоп-слов
        },
        "english_stemmer": {
          "type": "stemmer", // Фильтр стемминга (приведение слов к корню)
          "language": "english" // Для английского языка
        },
        "english_possessive_stemmer": {
          "type": "stemmer", // Стемминг притяжательных форм (например, "John's" → "John")
          "language": "possessive_english"
        },
        "russian_stop": {
          "type": "stop", // Фильтр стоп-слов для русского языка
          "stopwords": "_russian_"
        },
        "russian_stemmer": {
          "type": "stemmer", // Стемминг для русского языка
          "language": "russian"
        }
      },
      "analyzer": {
        "ru_en": { // Кастомный анализатор для русского и английского языков
          "tokenizer": "standard", // Стандартный токенизатор (разделяет текст на слова)
          "filter": [
            "lowercase", // Приведение к нижнему регистру
            "english_stop", // Удаление английских стоп-слов
            "english_stemmer", // Стемминг английских слов
            "english_possessive_stemmer", // Стемминг притяжательных форм
            "russian_stop", // Удаление русских стоп-слов
            "russian_stemmer" // Стемминг русских слов
          ]
        }
      }
    }
  },
  "mappings": {
    "dynamic": "strict", // Запрещает появление новых полей, не описанных в схеме
    "properties": {
      "id": {
        "type": "keyword" // Уникальный идентификатор, не анализируется
      },
      "imdb_rating": {
        "type": "float" // Рейтинг фильма (число с плавающей точкой)
      },
      "genres": {
        "type": "keyword" // Жанры фильма (массив строк, не анализируется)
      },
      "title": {
        "type": "text", // Название фильма, анализируется (поиск по тексту)
        "analyzer": "ru_en", // Использует кастомный анализатор для русского и английского
        "fields": {
          "raw": { 
            "type": "keyword" // Дополнительное поле для точного поиска по названию
          }
        }
      },
      "description": {
        "type": "text", // Описание фильма, анализируется
        "analyzer": "ru_en"
      },
      "directors_names": {
        "type": "text", // Имена режиссёров (строкой), анализируется
        "analyzer": "ru_en"
      },
      "actors_names": {
        "type": "text", // Имена актёров (строкой), анализируется
        "analyzer": "ru_en"
      },
      "writers_names": {
        "type": "text", // Имена сценаристов (строкой), анализируется
        "analyzer": "ru_en"
      },
      "directors": {
        "type": "nested", // Вложенные объекты (список режиссёров)
        "dynamic": "strict",
        "properties": {
          "id": {
            "type": "keyword" // ID режиссёра
          },
          "name": {
            "type": "text", // Имя режиссёра, анализируется
            "analyzer": "ru_en"
          }
        }
      },
      "actors": {
        "type": "nested", // Вложенные объекты (список актёров)
        "dynamic": "strict",
        "properties": {
          "id": {
            "type": "keyword" // ID актёра
          },
          "name": {
            "type": "text", // Имя актёра, анализируется
            "analyzer": "ru_en"
          }
        }
      },
      "writers": {
        "type": "nested", // Вложенные объекты (список сценаристов)
        "dynamic": "strict",
        "properties": {
          "id": {
            "type": "keyword" // ID сценариста
          },
          "name": {
            "type": "text", // Имя сценариста, анализируется
            "analyzer": "ru_en"
          }
        }
      }
    }
  }
}'